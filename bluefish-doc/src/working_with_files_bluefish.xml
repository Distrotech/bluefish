<!--
Using Bluefish - a part of the Bluefish manual
Copyright (C) 2004  Olivier Sessink
Copyright (C) 2004-2006  The Bluefish Project Team

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-->

<chapter id="working-with-files">
<title>Working with files and folders</title>
<para>Most of the file operations are accessible from the <guimenu>File</guimenu> menu. Using this menu, a new file can be created, existing files opened, and opened files saved or renamed.</para>
<para>You may also insert a file into another one, and revert a modified file to its previously saved state.	
<figure id="figure-file-menu">
<title id="figure-file-menu-title">Bluefish File Menu</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/file_menu.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot of the Bluefish File Menu</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<note><para>In case you compiled bluefish from source, the <menuchoice><guimenu>File</guimenu><guimenuitem>Open URL...</guimenuitem></menuchoice> menu item is shown only if you installed gnome-vfs2 beforehand.</para>
<para>For Mac OS X users installing via Fink, choose bluefish-gnomevfs2 or bluefish-gnome2 variant.</para> 
</note>
<para>You may also add directories, delete files, and refresh the file browser in the side panel using its contextual menu.
<figure id="file-browser-cm">
<title id="file-browser-cm-title">The File Browser Contextual Menu</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/file_browser_cm.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing the file browser contextual menu</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>You may also open a file using drag and drop from the desktop or from Nautilus to any part of the Bluefish window but the editor part when you are under Gnome2 environment.</para>
<note><para>If you drag and drop the file to the editor window, the full path of the file is inserted.</para></note>

<sect1 id="creating-files">
<title>Creating files</title>
<para>Apart from using <menuchoice><shortcut><keycombo><keycap>Ctrl</keycap><keycap>N</keycap></keycombo></shortcut><guimenu>File</guimenu><guimenuitem>New</guimenuitem></menuchoice> or the <guilabel>New</guilabel> icon to create a new file, you may also use <menuchoice><shortcut><keycombo><keycap>Shift</keycap><keycap>Ctrl</keycap><keycap>N</keycap></keycombo></shortcut><guimenu>File</guimenu><guimenuitem>New Window</guimenuitem></menuchoice>.</para>
<para>Those methods create an untitled file of type <literal>text</literal> (except when you are working on a project with defined template file, see <xref linkend="creating-new-project"/>
 for more info) with default permissions and the default character encoding defined in the <guilabel>Files</guilabel> tab in the <menuchoice><guimenu>Edit</guimenu><guimenuitem>Preferences</guimenuitem></menuchoice> menu option. You will further have to <link linkend="saving-files">save</link> it under the desired name.
<figure id="untitled-document">
<title id="untitled-document-title">Untitled Document Window</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/untitled_document.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>Screen shot of an untitled document window</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<important><para>Note that the document window is titled <quote>Untitled n - Bluefish versionnumber</quote>, which indicates precisely that the file is not saved on the disk. The same applies to the document's tab which shows <quote>Untitled n</quote>. Moreover, if you move the cursor onto the document's tab, you will not see any size or modification date.</para></important>
<tip><para>When creating new files, you may want to create them in a new window. In this case, use <menuchoice><guimenu>File</guimenu><guimenuitem>New Window</guimenuitem></menuchoice> to first open the new window and then create the desired files as usual.</para></tip>
<?pagebreaka4?>
<?linebreaka45?>
<para>To spare yourself the bother of saving, right click on the desired directory in the directory list of the file browser in the side panel and select <guilabel>New File</guilabel>. You will be presented with a <guilabel>File name</guilabel> dialog, where you will enter the desired name:
<figure id="file-name-dialog">
<title id="file-name-dialog-title">The File Name Dialog</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/file_name_dialog.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing the File name dialog</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<tip><para>You may type a path relative to the clicked directory, provided that the target directory be under the clicked directory and that it exists.</para></tip>
</sect1>
<?linebreaka45?>
<sect1 id="managing-directories">
<title>Managing directories</title>
<para>To create a new directory, right click on the desired parent directory in the directory list of the file browser in the side panel and select <guilabel>New Directory</guilabel>. You may also right click on any file in the files part of the file browser.</para>
<para>Then enter the desired name in the <guilabel>Directory name</guilabel> dialog. Bluefish will create the named directory with the default permissions under the currently selected directory.
<figure id="directory-name-dialog">
<title id="directory-name-dialog-title">The Directory Name Dialog</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/directory_name_dialog.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing the Directory name dialog</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>Note that you cannot delete directories within Bluefish, but you can refresh the view with the <guilabel>Refresh</guilabel> contextual menu item of the directory part of the file browser if you delete them externally. This is especially useful when you add files and directories or delete files.</para>
<para>If you right click a directory in the file browser within the side panel, you can make this directory the base directory for the file browser using the <guimenuitem>Set as basedir</guimenuitem> option. Then you can access it directly from the pop up menu in the upper part of the file browser.</para>
<para>By default the file browser follows the document focus. If you change to a different document, the file browser will show the contents of the directory where this document is located. This behaviour can be changed by unchecking <guilabel>Follow focus</guilabel> on the bottom of the file browser.</para>
</sect1>
<?pagebreaka4?>
<sect1 id="opening-files">
<title>Opening files</title>
<para>Through the <menuchoice><shortcut><keycombo><keycap>Ctrl</keycap><keycap>O</keycap></keycombo></shortcut><guimenu>File</guimenu><guimenuitem>Open...</guimenuitem></menuchoice> menu item or the <guilabel>Open...</guilabel> icon in the main tool bar, one or more files can be opened. If you want to open them in a new window, use <menuchoice><guimenu>File</guimenu><guimenuitem>New Window</guimenuitem></menuchoice> to first open the new window and then open the desired files as usual.
<?linebreakus8?>
<figure id="figure-open-file">
<title id="figure-open-file-title">Bluefish Open File Dialog</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/open_file.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot of the Open File Dialog</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<note>
<para>The most recently opened directories appear in the upper part of the side panel, while the lower part contains user-defined locations. To add a new directory to the list, click on <guilabel>Add</guilabel>. You can also filter the file list by file type using the pop menu located on the right side. The list of file types in the filter menu is provided through the <guilabel>Filetypes</guilabel> tab found in Bluefish's <menuchoice><guimenu>Edit</guimenu><guimenuitem>Preferences</guimenuitem></menuchoice> menu option.</para>
</note>
<para>Recently opened files can be opened by selecting them from the list within <menuchoice><guimenu>File</guimenu><guimenuitem>Open recent</guimenuitem></menuchoice>. The number of files in this menu can be set in the preferences under <guilabel>Files</guilabel>.</para>
<para>The contextual menus of both parts of the file browser in the side panel can also be used to open files. The file part supports opening a given file by right clicking it, and filtering files via the <guilabel>Filter</guilabel> submenu of its contextual menu. The directory part supports filtering files via the <guilabel>Filter</guilabel> submenu of its contextual menu, and advanced opening explained in the <xref linkend="open-advanced"/>.
<figure id="figure-file-browser-filtering">
<title id="figure-file-browser-filtering-title">Filtering Files with the Bluefish File Browser</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/file_browser_filtering.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to filter files with the Bluefish file browser</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>The available filters may be modified in Preferences. For more information, see <xref linkend="modifying-filefilters"/>.</para>
<para>An interesting feature of Bluefish is the ability to open files by selecting the text of a currently opened file in another application. For example, if a filename is shown in say a terminal application, you can select the filename, and use <menuchoice><guimenu>File</guimenu><guimenuitem>Open from Selection</guimenuitem></menuchoice> to open that file. The file, if it exists, will be opened in another tab within Bluefish.</para>
<important><para>The selected text should match the full path of an existing file.</para></important>
<para>Files can also be opened via the command line by feeding filenames to Bluefish as arguments. For example:</para>
<screen><prompt>$</prompt>bluefish ~/foo1.txt ~/foo2.txt</screen>
<para>This can even be done while Bluefish is running and the resulting files will then show up in their own tabs.</para>
<tip>
<para>If you have installed gnome-vfs or gnome-vfs2 before installing Bluefish, you will be able to open files on remote desktop via the <menuchoice><guimenu>File</guimenu><guimenuitem>Open URL...</guimenuitem></menuchoice> menu item. See more on this in the <xref linkend="remote-files"/>.</para>
<para>Finally, if the gnome2 environment is installed on your system, you may open files by drag and drop from the desktop or the Nautilus file manager onto any part of the Bluefish interface, but the document's editor.</para></tip>
<para>Be aware that if the file is huge it may take a very long time to get the rendering if syntax highlighting is enabled in the <guilabel>Editor</guilabel> option of Preferences, in particular if the PCRE UTF-8 support is enabled. The GTK editing widget used in Bluefish, furthermore, is not very good at handling files with very long lines, and that could also slow down Bluefish considerably.</para>
<para>Information about currently opened files can be seen if you move the mouse over the document tab (by default on the bottom of the screen). A so called tool tip will be shown with information about the full path, size, permissions, file type and encoding of the file.
<figure id="figure-open-file-info">
<title id="figure-open-file-info-title">Info on open File</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/open_file_info.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing Info on open file</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<note><para>Note that the document's tab is hightlighted in red, because the document has been modified since the last save. Info in the tool tip match the state of the file as it was saved on disk.</para></note>
</sect1>

<sect1 id="saving-files">
<title>Saving files</title>
<para>To save a document, you can use the <guimenu>File</guimenu> menu, the <guilabel>Save</guilabel> icon in the tool bar, or press the shortcut key combination <keycombo><keycap>Ctrl</keycap><keycap>S</keycap></keycombo>.</para>
<para>If the file does not exist already on the disk, you will be presented with the following dialog window:
<figure id="figure-saving-untitled-file">
<title id="figure-saving-untitled-file-title">Saving an untitled File</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/saving_untitled_file.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to save an untitled file</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>If the file already exists on the disk, no dialog window pops up. It is assumed that the file name does not change.</para>
<para>When a document has been modified, the filename is shown in red in the document tabs; morever if you right click on the tabs, the full path is shown in red in the list that will pop up.
<figure id="figure-modified-file-tooltip">
<title id="figure-modified-file-tooltip-title">A modified Document in the Documents' List</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/modified_file_tooltip.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing a modified document in the documents' list</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>By default a backup is made during save. The original file is copied to the same filename with a tilde <keycap>~</keycap> appended. This suffix and the backup behaviour can be changed in the preferences under <guilabel>Files</guilabel>.</para>
<para>Before saving the file, Bluefish will check if the original file was changed on disk, using the last modified time and the file size. On some file systems the last modified time is sometimes not very precise (most notably on samba mounts). This makes Bluefish think the file is modified when it is not. This check can be changed in the preferences under <guilabel>Files</guilabel>.</para>
<para>You can also save a document under a different name, using the <menuchoice><shortcut><keycombo><keycap>Shift</keycap><keycap>Ctrl</keycap><keycap>S</keycap></keycombo></shortcut><guimenuitem>Save As...</guimenuitem></menuchoice> menu entry, or the <guilabel>Save As...</guilabel> icon in the main tool bar. The original file will still exist.
<figure id="figure-saving-as-file">
<title id="figure-saving-as-file-title">Saving a File under a new Name</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/saving_as_file.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to save a file under a new name</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>To save all modified files, you can use the <menuchoice><guimenu>File</guimenu><guimenuitem>Save All</guimenuitem></menuchoice> menu entry. This will save all documents that have been modified and present you with a save dialog if some files are new files.</para>
</sect1>

<sect1 id="renaming">
<title>Renaming files</title>
<para>It is also possible to move or rename a document, using the <menuchoice><shortcut><keycap>F2</keycap></shortcut><guimenu>File</guimenu><guimenuitem>Rename...</guimenuitem></menuchoice> menu item, or right-clicking the file name in the side panel and choosing the <guimenuitem>Rename</guimenuitem> item.
<figure id="figure-moving-file">
<title id="figure-moving-file-title">Moving a File to another Location</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/moving_file.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to move a file to another location</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
</sect1>

<?pagebreakus?>
<sect1 id="deleting-files">
<title>Deleting files</title>
<para>To delete a file, right click on it in the file browser within the side panel. You will be asked either to confirm the deletion or to cancel the process, if you have the right permissions for it.</para>
<warning>
<para>Be cautious with this feature, there is no easy way to recover the deleted file.</para>
<para>Mac OS X users: this command is not equivalent to putting the file in the trash, but to using the <command>rm</command> command, so that, apart using a specialized commercial tool, you cannot recover the file.</para>
</warning>
<para>Combining this feature with the <guilabel>Show hidden files</guilabel> feature accessible via the contextual menu of the Filebrowser side panel allows you to delete hidden files more easily than via the <command>rm</command> tool on some systems.</para>
<para>Combining it with the <guilabel>Rename</guilabel> feature accessible via the contextual menu of the Filebrowser side panel allows you to delete an original file once you have edited a new file based on the former one, and to give the new file the same name as the original one.</para>
<tip>
<para>The first safe usage I can find for this feature is, for example, to remove the backup <filename>.#filename.version</filename> files created by CVS during conflicts after resolving them, particularly on Mac OS X where those files are tricky to access.</para>
<para>A second usage would be, for example, to save a po file again under its original name after updating it via a shell script under a new name, and editing it manually.</para>
</tip>
</sect1>

<sect1 id="closing">
<title>Closing files</title>
<para>When you want to close a file quickly, click on the <guilabel>close</guilabel> icon in the document tab. You may also use the <guilabel>Close</guilabel> icon in the main tool bar, or the <menuchoice><shortcut><keycombo><keycap>Ctrl</keycap><keycap>W</keycap></keycombo></shortcut><guimenu>File</guimenu><guimenuitem>Close</guimenuitem></menuchoice> menu item.		
<figure id="figure-document-tab-icon">
<title id="figure-document-tab-icon-title">Closing a File with the Document Tab Icon</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/closing_file_with_tab_icon.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot of the close icon in the document tab</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>If the file is unchanged, it is merely closed. If the file has been modified, you will be presented with a save dialog.
<figure id="figure-closing-a-file">
<title id="figure-closing-a-file-title">Closing a modified File</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/closing_a_file.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to close a modified file</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<tip>
<para>Use it to save and close a file in one step.</para>
</tip>
<para>When dealing with multiple files, you may want to use the <menuchoice><shortcut><keycombo><keycap>Shift</keycap><keycap>Ctrl</keycap><keycap>W</keycap></keycombo></shortcut><guimenu>File</guimenu><guimenuitem>Close All</guimenuitem></menuchoice> menu item.</para>
<para>For each modified file, you will be presented with a save dialog, where you can choose to save the changes, close the file (i.e. discarding any change), or cancel the operation.
<figure id="figure-closing-all-files">
<title id="figure-closing-all-files-title">Closing all Files</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/closing_all_files.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to close all files</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<tip>
<para>Say you have a number of open files, and only a few of them have been changed. To quickly close the unchanged files, and remain with the modified ones, use it answering cancel for the latter ones.</para>
</tip>
<para>Note that the <menuchoice><guimenu>File</guimenu><guimenuitem>Close Window</guimenuitem></menuchoice> menu item offers the same behaviour.</para>
</sect1>

<sect1 id="inserting">
<title>Inserting files</title>
<para>You can insert any file into the current document with the <menuchoice><guimenu>File</guimenu><guimenuitem>Insert...</guimenuitem></menuchoice> menu item.
<figure id="figure-inserting-file">
<title id="figure-inserting-file-title">Inserting a File</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/inserting_file.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to insert a file</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
 <para>The file will be inserted at the cursor location.</para>
<warning><para>Always save the file before inserting another one, this will prevent any potential loss of data.</para></warning>
<para>For more in-depth information about dealing with files, see <xref linkend="more-files"/>.</para>
</sect1>

<sect1 id="editing">
<title>Editing</title>

<sect2 id="undo-redo">
<title>Undo and Redo</title>
<para>The undo and redo functionalities are available from the <guimenu>Edit</guimenu> menu,  the main tool bar, and the keyboard shortcuts.</para>
<itemizedlist>
<listitem>
<para><menuchoice><shortcut><keycombo><keycap>Ctrl</keycap><keycap>Z</keycap></keycombo></shortcut><guimenuitem>Undo</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><shortcut><keycombo><keycap>Shift</keycap><keycap>Ctrl</keycap><keycap>Z</keycap></keycombo></shortcut><guimenuitem>Redo</guimenuitem></menuchoice>
</para>
</listitem>
</itemizedlist>
<para>The functions <guimenuitem>Undo All</guimenuitem> and <guimenuitem>Redo All</guimenuitem> in the <guimenu>Edit</guimenu> menu will undo or redo all of the stored changes. The maximum number of changes can be configured in the preferences; by default Bluefish will remember the last 100 changes per document. It is possible to clear the changes after the document is saved by unchecking the <guilabel>Clear undo history on save</guilabel> check box in the <guilabel>Editor</guilabel> tab of Preferences.</para>
<important><para>Always perform a save on file before making important modifications. This will prevent any loss of data during undoing.</para></important>
</sect2>

<sect2 id="cut-copy-paste">
<title>Cut, Copy, and Paste</title>
<para>The functions <guimenuitem>Cut</guimenuitem>, <guimenuitem>Copy</guimenuitem>, and <guimenuitem>Paste</guimenuitem> are available from the <guimenu>Edit</guimenu> menu, the main tool bar, and the keyboard shortcuts.</para>
<itemizedlist spacing="compact">
<listitem>
<para><menuchoice><shortcut><keycombo><keycap>Ctrl</keycap><keycap>X</keycap></keycombo></shortcut><guimenuitem>Cut</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><shortcut><keycombo><keycap>Ctrl</keycap><keycap>C</keycap></keycombo></shortcut><guimenuitem>Copy</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><shortcut><keycombo><keycap>Ctrl</keycap><keycap>V</keycap></keycombo></shortcut><guimenuitem>Paste</guimenuitem></menuchoice></para>
</listitem>
</itemizedlist>
<para>On X Windows Systems, you can also paste the current selected text using the middle mouse button. First select some text (in Bluefish or in any other X application), then press the middle mouse button where you want to paste the selected text.</para>
<para>Cut or copy and then paste can also be done by selecting some text and dragging it to the destination. If the text is dragged to another document (or another application), it is copied. If the text is dragged within one document it is moved. Dragging highlighted text from one application to another may or may not work. However, most GNOME and GTK programs support this feature.</para>
</sect2>

<sect2 id="input-methods">
<title>Input methods</title>
<para>Bluefish handles a number of input methods, available from the contextual menu within a given document.
<figure id="figure-input-methods-cm">
<title id="figure-input-methods-cm-title">The Input Methods Contextual Menu</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/input_methods_cm.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing the input methods contextual menu</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<itemizedlist spacing="compact">
<listitem>
<para>The default mode switches all input methods off.</para>
</listitem>
<listitem>
<para>The Amharic mode is used for the most popular Ethiopian language.</para>
</listitem>
<listitem>
<para>The Cedilla mode is used for languages such as French, which uses the cedilla.</para>
</listitem>
<listitem>
<para>The Cyrillic mode is used to enter Russian with Roman letters. The transliteration occurs immediately.</para>
</listitem>
<listitem>
<para>The Inukitut mode works the same as Cyrillic mode.</para>
</listitem>
<listitem>
<para>The IPA mode is used for International phonetic alphabet.</para>
</listitem>
<listitem>
<para>Other modes are used for Erythrean, Ethiopian, Thai and Vietnamese languages.</para>
</listitem>
</itemizedlist>
<para>The X Input method relies on a client-server input system, and an input server.</para>
<para>For Japanese, Chinese, and Korean documents, you may have to install and launch the correct input system, such as canna, and the appropriate input server, such as kinput2.</para>
<para>Here is how to write a Japanese document on a non-Japanese system.</para>
<procedure id="japanese-writing"><title>Writing in Japanese with Bluefish on a non-Japanese system</title>
<step>
<para>Launch the canna server if it is not running already</para>
</step>
<step>
<para>Set the encoding to Japanese, for example: <userinput>export LANG=ja_JP.UTF-8</userinput></para>
</step>
<step>
<para>Set the Xinput method with <userinput>export XMODIFIERS="@im=kinput2"</userinput></para>
</step>
<step>
<para>Launch kinput2 as a background process with <userinput>kinput2 &amp;</userinput></para>
</step>
<step>
<para>Launch bluefish as a background process with <userinput>bluefish &amp;</userinput></para>
</step>
<step>
<para>To activate the Xinput method within bluefish, use <keycombo><keycap>Shift</keycap><keycap>Space</keycap></keycombo>. A small window with a Japanese glyph will appear at one of the corner of the Bluefish window. Once the desired glyph has been composed, press <keycap>Space</keycap>, and hit <keycap>enter</keycap> to validate it.</para>
</step>
</procedure>
<para>Here, you can see the small Xinput method window, at the bottom left corner of the window and the first Japanese word not already validated in the Bluefish window launched on a French system.	
<figure id="figure-japanese-with-bluefish">
<title id="figure-japanese-with-bluefish-title">Writing in Japanese with Bluefish</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/japanese_with_bluefish.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to write in Japanese with Bluefish</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>For an in-depth discussion on that subject, see <ulink url="http://www.jw-stumpel.nl/stestu.html#T6">Inputting from the keyboard</ulink>.</para>
</sect2>

</sect1>

<sect1 id="basic-find-replace">
<title>Basic Find and Replace</title>
<para>Bluefish offers a wide range of find and replace methods in the <guimenu>Edit</guimenu> menu, also available through the contextual menu within a document. Here we will explore the most basic ones. For advanced find and replace methods, see <xref linkend="find-replace"/>.</para>
<?pagebreaka4?>
<sect2 id="basic-find">
<title>Searching for a word within a whole document</title>
<para>Choose the <menuchoice><shortcut><keycombo><keycap>Ctrl</keycap><keycap>F</keycap></keycombo></shortcut><guimenu>Edit</guimenu><guimenuitem>Find...</guimenuitem></menuchoice> menu item. A <guilabel>Find</guilabel> dialog will be displayed. Enter the word to search for in the <guilabel>Search for:</guilabel> field. Then click <guibutton>OK</guibutton>.
<figure id="figure-find-word-whole">
<title id="figure-find-word-whole-title">Finding a Word in a Document, from Start to End</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/find_word_whole.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to search a string within a document, from start to end.</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>If the word does not exist in the document, a small window pops up.
<figure id="figure-search-not-found">
<title id="figure-search-not-found-title">Unsuccessful Search Window</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/search_not_found.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing the unsuccessful search window.</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>If the search is successful, the document window scrolls up to the first occurrence of the string in the document and highlights it.</para>

<para>Below is an example of a search applied to a shell script.

<figure id="figure-search-found">
<title id="figure-search-found-title">Highlighted Search Result in the Document Window</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/search_found.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing the search result highlighted in the document window.</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>To find a subsequent occurrence of the string, use the <menuchoice><shortcut><keycombo><keycap>Ctrl</keycap><keycap>G</keycap></keycombo></shortcut><guimenu>Edit</guimenu><guimenuitem>Find again</guimenuitem></menuchoice> menu item. If no further occurrence is found, a dialog will be displayed notifying you that no match was found.</para>
</sect2>



<sect2 id="basic-find-selection">
<title>Setting limits to the search scope</title>

<para>You may want to search for a string from the cursor location till the end of the document. Here is an example to search all <literal>name ==</literal> occurrences within a python script from a given location.</para>
<procedure id="search-selection"><title>Searching from selection</title>
<step>
<para>Put the cursor where you want to start the search from in the document window

<figure id="figure-find-limited-cursor">
<title id="figure-find-limited-cursor-title">Setting the Cursor Location</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/find_limited_cursor.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to set the cursor location for a limited search.</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
</step>
<step>
<para>Open the <guilabel>Find...</guilabel> dialog</para>
</step>
<step>
<para>Enter your search string in the <guilabel>Search for:</guilabel> field</para>
</step>
<step>
<para>Choose <guilabel>Current position till end</guilabel> from the <guilabel>Starts at:</guilabel> pop up menu
<figure id="figure-find-limited-dialog">
<title id="figure-find-limited-dialog-title">Choosing a limited Search Method</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/find_limited_dialog.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to search from the cursor's location.</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
</step>
<step>
<para>Click OK.</para>
</step>
</procedure>
<para>Here is the result:
<figure id="figure-find-limited-result">
<title id="figure-find-limited-result-title">Limited Search Result</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/find_limited_result.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing the result of a limited search.</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>Notice that the search does not take into account the occurrence of the same string at line 50, since it is outside the search scope.</para>

<para>You can also limit the search scope to a selection range. In that case, highlight the selection before the search, and choose <guilabel>Beginning of selection till end of selection</guilabel> from the <guilabel>Starts at:</guilabel> pop up menu in the <guilabel>Find</guilabel> dialog.</para>
</sect2>
<?pagebreaka4?>
<sect2 id="find-matching-case">
<title>Case sensitive search</title>
<para>By default, the search process is case insensitive. If you want to make it case sensitive, just check the <guilabel>Match case</guilabel> box in the <guilabel>Find dialog</guilabel>.
<figure id="figure-find-match-case">
<title id="figure-find-match-case-title">Making the Search Case Sensitive</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/find_match_case.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to make the search case sensitive</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>Here is the result applied to a ruby script:
<figure id="figure-find-match-result-case">
<title id="figure-find-match-case-result-title">Case Sensitive Search Result</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/find_match_case_result.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing a case sensitive search</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>Notice again that the result does not catch the XML string at line 45, since the search string was xml and case sensitive search was requested.</para>
</sect2>

<sect2 id="find-overlap">
<title>Overlapping searches</title>
<para>It may occur that the document contains some kind of palindrome you want to search for. The "normal" find process does not retrieve all occurrences of that kind of string.</para>
<para>In this case, you have to check the <guilabel>Overlap searches</guilabel> box in the <guilabel>Find</guilabel> dialog to retrieve all occurences of the string.
<figure id="figure-find-basic-overlap">
<title id="figure-find-basic-overlap-title">Finding overlapping Strings</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/find_basic_overlap.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to find overlapping strings</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>Applied to a shell script, the second search (with <keycombo><keycap>Ctrl</keycap><keycap>F</keycap></keycombo>, then <keycombo><keycap>Ctrl</keycap><keycap>G</keycap></keycombo>) will give the following result:
<figure id="figure-find-basic-overlap-result">
<title id="figure-find-basic-overlap-result-title">An overlapping String retrieved with the Find Dialog</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/find_basic_overlap_result.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing an overlapping string retrieved by the Find process</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
</sect2>

<sect2 id="find-old-search">
<title>Retrieving previous search strings</title>
<para>Notice that the pop up menu to the right of the <guilabel>Search for</guilabel> field in the <guilabel>Find</guilabel> dialog allows you to retrieve previous search strings. They are listed in reverse order by search history, providing quicker access to the most recent searches.
<figure id="figure-find-recent">
<title id="figure-find-recent-title">Retrieving recent Searches</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/find_recent.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing the search for pop up menu to retrieve recent search string</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
</sect2>

<sect2 id="more-on-find">
<title>More on find</title>
<para>For an explanation of the <guilabel>Bookmark results</guilabel> box of the <guilabel>Find</guilabel> dialog, see <xref linkend="generate-bookmark"/>.</para>
<para>You will find details on <guilabel>Find Again</guilabel> and <guilabel>Find from Selection</guilabel> in <xref linkend="find-replace"/>.</para>
<para>For a quick way of switching from HTML entities to other types of encoding and changing letter cases, see <xref linkend="find-replace-special"/>.</para>
</sect2>

<sect2 id="basic-replace">
<title>Replacing features</title>
<para>The <menuchoice><shortcut><keycombo><keycap>Ctrl</keycap><keycap>H</keycap></keycombo></shortcut><guimenu>Edit</guimenu><guimenuitem>Replace...</guimenuitem></menuchoice> menu item works the same way and has all the features, the <menuchoice><shortcut><keycombo><keycap>Ctrl</keycap><keycap>F</keycap></keycombo></shortcut><guimenu>Edit</guimenu><guimenuitem>Find...</guimenuitem></menuchoice> menu item offers.</para>
<para>The <guilabel>Replace</guilabel> dialog is also accessible through the contextual menu within a document.</para>
<para>For the features common to the <guilabel>Find</guilabel> dialog, see <xref linkend="basic-find"/>.</para>
<para>Here we will explain the features unique to the <guilabel>Replace</guilabel> dialog.
<figure id="figure-replace-dialog">
<title id="figure-replace-dialog-title">The Replace Dialog</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/replace_dialog.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing the replace dialog</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
</sect2>

<sect2 id="replace-old-search">
<title>Retrieving previous replace strings</title>
<para>As for the <guilabel>Search for</guilabel> field's pop up menu, the <guilabel>Replace with</guilabel> field's pop up menu allows you to retrieve previous strings used for replace, the most recent ones being at the top of the list.</para>
</sect2>



<sect2 id="replace-type">
<title>Changing letter case when replacing</title>
<para>If you want to change letter case when replacing, use the <guilabel>Replace type</guilabel> pop up menu.</para>
<para>The default choice is <guilabel>Normal</guilabel>, that is the case is not changed.</para>
<para>With the <guilabel>Uppercase</guilabel> replace type, the search string will be replaced with its uppercase translation.</para>
<para>Likewise, with the <guilabel>Lowercase</guilabel> replace type, the search string will be replaced with its lowercase translation.
<figure id="figure-replace-type-dialog">
<title id="figure-replace-type-dialog-title">Changing letter Case when Replacing</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/replace_type_dialog.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to change letter case when replacing</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>Notice that in this case, the <guilabel>Replace with</guilabel> field is deactivated, thus not taken into account even if you have entered some string in it.</para>
</sect2>

<sect2 id="replace-prompt">
<title>Choosing strings to replace</title>
<para>It may occur that you do not want to replace all search strings retrieved by the search process, but only some of them. In this case, check the <guilabel>Prompt before replace</guilabel> box. A <guilabel>Confirm replace</guilabel> dialog will appear for each retrieved string where you can choose to <guilabel>Skip</guilabel> this string, i.e. leave it as it is, <guilabel>Replace</guilabel> it, <guilabel>Replace all</guilabel> strings within the search scope, or <guilabel>Close</guilabel> the dialog, i.e. cancel the process.
<figure id="figure-replace-confirm-dialog">
<title id="figure-replace-confirm-dialog-title">The Replace Confirm Dialog</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/replace_confirm_dialog.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing the replace confirm dialog</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
<para>If you want to replace only the first occurrence of a search string, check the <guilabel>Replace once</guilabel> box instead.</para>
</sect2>

<sect2 id="more-on-replace">
<title>More on replace</title>
<para>For further explanation on replace features within Bluefish, see <xref linkend="find-replace"/>.</para>
</sect2>

</sect1>

<sect1 id="file-types">
<title>File types</title>
<para>Different file types can change the behaviour of Bluefish. File types are recognized by their extension, or by the beginning of the file's contents. The current document type is shown in the far right of the status bar. If the type of a file is not properly detected, you can change the type using the <menuchoice><guimenu>Document</guimenu><guisubmenu>Document Type</guisubmenu></menuchoice> menu. See <xref linkend="bluefish-preferences"/> to change these extensions.</para>

<sect2 id="syntax-highlighting">
<title>Syntax highlighting</title>
<para>Syntax highlighting is the coloring of words that have special meaning for a language. The patterns can vary: for example, "&lt;title&gt;"  means "start of title" in HTML, "function" means "start of function" in PHP.</para>
<para>While editing, Bluefish will only update the highlighting patterns in the block of text around the cursor. The number of lines (the size) of this block can be adjusted in the preferences under <guilabel>Editor</guilabel>. The syntax highlighting for the total document can be refreshed using the <menuchoice><shortcut><keycap>F5</keycap></shortcut><guimenu>Document</guimenu><guimenuitem>Update Highlighting</guimenuitem></menuchoice> menu. It can be disabled in the preferences under <guilabel>Editor</guilabel>. For more information about adding or modifying syntax highlighting for existent or new languages, see <link linkend="changing-highlighting-patterns">here</link>.</para>
</sect2>

</sect1>

<sect1 id="more-files">
<title>More on files</title>

<sect2 id="remote-files">
<title>Remote files</title>

<para>Assuming a working Internet connection, files can also be opened from the web using <menuchoice><guimenu>File</guimenu><guimenuitem>Open URL</guimenuitem></menuchoice>. This feature depends on your gnome_vfs setup. If it is installed and working, http://, sftp://, smb:// and possibly more types of remote services should be supported by Bluefish. Depending on your gnome_vfs version, some of these protocols are not yet fully stable, which can crash Bluefish!

<figure id="figure-open-url">
<title id="figure-open-url-title">Opening an URL from the Web</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/open_url.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing how to open an URL from the web</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>

<para>Here you can see the style sheet of an Apache web site, nicely highlighted after its opening via the Bluefish <menuchoice><guimenu>File</guimenu><guimenuitem>Open URL</guimenuitem></menuchoice> menu.
<figure id="figure-open-url-result">
<title id="figure-open-url-result-title">A Style Sheet opened via the Open URL Menu</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/open_url_result.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot of a style sheet opened via the Open URL menu</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
</sect2>

<sect2 id="character-encoding">
<title>Character encoding</title>
<para>There are many different standards for character encoding of text files. Most well known is the ASCII standard, which describes only 127 characters, and is supported by every text editor in the world. The most common standard nowadays is UTF-8, which describes thousands of characters, and is backwards compatible with ASCII.</para>
<para>Internally, Bluefish will always work with UTF-8. When opening a file, Bluefish has to detect the correct encoding for the file. For HTML files, the encoding should be present in a &lt;meta name=&quot;encoding&quot;&gt; tag. Bluefish will always use this tag if it is available in the file. If this tag has an encoding that is not present in the Bluefish config file, this encoding is automatically added to the Bluefish config file.</para>
<para>The locale also defines a default encoding. If you are using a locale (a local setting, defining language, time format, currency format, number formatting etc.), Bluefish will try to load the file using the encoding defined in the locale.</para>
<para>Bluefish itself also has a setting for a default encoding. This is the next encoding Bluefish will try. This is also the encoding Bluefish will use for files created by Bluefish (UTF-8 by default).</para>
<para>If these steps fail, Bluefish will simply try every encoding defined in the Bluefish 
config file.</para>
<para>Filenames on disk can also contain non ASCII characters. All GNOME and GTK programs (including Bluefish) assume that filenames are in UTF-8 encoding. If you have filenames in the encoding of your locale on your disk, you have to set <userinput>G_BROKEN_FILENAMES=1</userinput> in the environment to make GNOME and GTK programs detect this encoding.</para>
<para>For information about writing documents in 16-bits encoded languages, such as Japanese, see <xref linkend="input-methods"/>.</para>
</sect2>

<sect2 id="open-advanced">
<title>Open advanced</title>
<para>You can open multiple files at once with the <menuchoice><shortcut><keycombo><keycap>Shift</keycap><keycap>Ctrl</keycap><keycap>O</keycap></keycombo></shortcut><guimenu>File</guimenu><guimenuitem>Open Advanced...</guimenuitem></menuchoice> menu item from a directory based on their extension or their contents. The same functionality is available from the file browser in the side panel by right-clicking a directory. This feature is available only when the find and grep utilities are installed on your system.</para>
<para>To open all files by extension, enter the extension in the dialog, and leave the search pattern empty. Check the <guilabel>recursive</guilabel> option if you want to include all subdirectories in the search. To open files by content, leave the extension at *, and enter a search pattern in the dialog. You can use regular expression patterns if you check the <guilabel>Is regex</guilabel> option.</para>
<para>You may also combine both methods. Here we open recursively all Chinese XML files in a given tree, whose contents contain the word packaging.
<figure id="figure-open-advanced">
<title id="figure-open-advanced-title">Using the Open Advanced Dialog</title>
<screenshot><mediaobject>
<imageobject>
<imagedata fileref="figures/open_advanced.png" format="PNG"/>
</imageobject>
<textobject>
<phrase>A screen shot showing the usage of the Open Advanced dialog</phrase>
</textobject>
</mediaobject></screenshot>
</figure></para>
</sect2>

</sect1>

</chapter>

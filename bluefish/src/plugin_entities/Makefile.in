# Bluefish HTML Editor
# Makefile.in - the plugin Makefile template
# Copyright (C) 2005 Olivier Sessink
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.

top_srcdir = @top_srcdir@
top_builddir = @top_srcdir@
srcdir = @srcdir@
prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
pkgdatadir = @pkgdatadir@
pkglibdir = @pkglibdir@

infodir = $(prefix)/info
mandir = $(prefix)/man/man1
localedir = @localedir@
gnulocaledir = $(prefix)/share/locale
aliaspath = $(localedir):.

CC = @CC@
LIBTOOL = @LIBTOOL@
CFLAGS = @CFLAGS@
LDFLAGS = @LDFLAGS@
LIBS = @LIBS@
INSTALL = @INSTALL@
INSTALL_DIR = $(INSTALL) -d -m 755 
INSTALL_PLUGIN = $(INSTALL) -s -m 644

DEFS = -DLOCALEDIR=\"$(localedir)\" -DGNULOCALEDIR=\"$(gnulocaledir)\" \
-DLOCALE_ALIAS_PATH=\"$(aliaspath)\" -DPKGDATADIR=\"$(pkgdatadir)\" @DEFS@

PLUGIN=entities.so
PLUGINDIR=${pkglibdir}

OBJECTS= entities.o
LOBJECTS = $(OBJECTS:.o=.lo)

all: $(PLUGIN)

install: $(PLUGIN)
	$(INSTALL_DIR) $(DESTDIR)$(PLUGINDIR)
	$(INSTALL_PLUGIN) $(PLUGIN) $(DESTDIR)$(PLUGINDIR)

uninstall:
	rm -f $(DESTDIR)$(PLUGINDIR)/$(PLUGIN)
	-rmdir $(DESTDIR)$(PLUGINDIR)		

$(PLUGIN): $(OBJECTS)
	$(LIBTOOL) --mode=link $(CC) -module $(LIBS) -shared -o $@ $(LOBJECTS)

.c.o: $(SRCS)
	$(LIBTOOL) --mode=compile $(CC) $(DEFS) $(CFLAGS) -c $^ -o $@

clean:
	@cd po/ && make clean
	rm -f $(PLUGIN) *.o *.lo
	rm -rf .libs

patchclean:
	rm -f *.orig *.rej

distclean: clean patchclean
	rm -f Makefile


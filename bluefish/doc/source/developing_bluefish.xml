<!--
this file belongs to bluefish, a web development environment
Copyright (C) 2002  Denny Reeh

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-->
<chapter id="developing-bluefish">

  <title>Development guidelines</title>
	<simplesect>    
		<para>
	      Work hard but have fun!
		</para>
	</simplesect>


	<sect1 id="developing-bluefish-formating-style">
		<title>Indenting and formating style</title>
		<para>Indenting can be done with the indent utility. Bluefish 
		uses tabs - not spaces, and I'll explain why. Some programmers
		prefer a lot of indenting, 8 characters, some prefer less, 3 
		characters. If Bluefish code was indented with spaces, these
		programmers had a problem, they would have to change the files
		to view it in their favourite layout. But because we use tabs, 
		these programmers can simply set the tab width to a different 
		value, and without changing the files it looks good for both 
		programmers!
		</para>
		<para>
			indent --line-length 100 --k-and-r-style --tab-size 4 -bbo --ignore-newlines bluefishcode.c
		</para>
	<para>
	comment all public functions like it is done in bf_lib.c and gtk_easy.c (javadoc style, with some small differences), this can be used to create a function reference
	</para>
	</sect1>
	<sect1 id="developing-bluefish-naming">
		<title>Naming</title>
		<para>
			for non-local functions, the name should preferably include a prefix that shows 
			the part of bluefish it is used for. There are, furthermore, many often used 
			abbreviations in the bluefish code, such as:
		</para>
		
		<itemizedlist>
		<listitem><para>doc - a function for handling a specific document</para></listitem>
		<listitem><para>bfwin - a function for handling a specific Bluefish window</para></listitem>
		<listitem><para>cb - callback, a function called after a button click or some other event</para></listitem>
		<listitem><para>lcb - local callback, a function called after an event, only used in this .c file</para></listitem>
		</itemizedlist>
		<para>
		Example function names that show where they are from, what they handle, and/or what they do:
		</para>
		<itemizedlist>
		<listitem><para>bmark_set_for_doc - bookmark code, sets bookmarks for a document</para></listitem>
		<listitem><para>spell_check_cb - spell check code, this is a callback function (for a button)</para></listitem>
		<listitem><para>project_open_from_file - project code, opens a new project from a given file name</para></listitem>
		</itemizedlist>
		
	</sect1>
	<sect1 id="developing-bluefish-declaring-procedures">
		<title>Declaring procedures</title>
		<para>
			All local functions should be static! Callback functions (called for events 
			such as button clicks) should have prefix _cb, or _lcb for local callbacks.
		</para>

		<para>
				for GTK callback functions, use the name of the signal in the name
		</para>
		
	</sect1>
	<sect1 id="developing-bluefish-header-files">
		<title>Header files</title>
		<para>
			Only functions that are used from outside the file itself 
			should be in the header file, in the order in which they
			are found in the .c file itself. Basically these are all
			non-static functions in the .c file.
		</para>
	</sect1>
	<sect1 id="developing-bluefish-new-files">
		<title>New files</title>
		<para>
			About new files
		</para>
	</sect1>
	<sect1 id="developing-bluefish-file-reference">
		<title>File reference</title>
		<para>
			References
		</para>
	</sect1>
	<sect1 id="developing-bluefish-patches">
		<title>Patches</title>
		
<para>Before starting to code:</para>
<itemizedlist>
	  <listitem><para>update your CVS tree, or alternatively download the latest snapshot</para></listitem>
	  <listitem><para>copy this original tree, so you can make a patch against this tree</para></listitem>
</itemizedlist>

<para>Before creating the patch:</para>
<itemizedlist>
<listitem><para>run make distclean &amp;&amp; ./configure &amp;&amp; make and test if it runs successfully</para></listitem>
<listitem><para>if you have the possibility do this both with gcc-2.95 and gcc-3. as compiler</para></listitem>
</itemizedlist>
<para>Now create the patch. Suppose you have two directories, original-tree and my-tree</para>
<itemizedlist>
<listitem><para>run make distclean in both trees</para></listitem>
<listitem><para>cd to the parent dir of both trees</para></listitem>
<listitem><para>run diff -Naur original-tree my-tree | bzip2 -9c > patchbla.diff.bz2</para></listitem>
</itemizedlist>
		
		
		

	</sect1>

	<sect1 id="developing-bluefish-translations">
		<title>Translations</title>
		 <sect2>
		 <title>Introduction</title>
		 <para>
		       Bluefish has been translated into more than 15
		       different languages and this only the begining.
		       Translation process is not a difficult task but you
		       will need some time because there are more than one
		       thousand strings to be translate.The good news are you
		       don't need to be a programmer to make Bluefish speak
		       your language and the only tool you need is a text editor
		       (<application>Vim</application>, <application>Emacs</application>, etc.)
                 </para> 
        
                 <para>
		      Bluefish uses po (Portable Object) files. A po file is
		      just a plain text file that you can edit with your
		      favorite text editor.
                 </para>
		 </sect2>
                <sect2> 
		<title>PO files basics</title>

		 <para>
		 	In general, in a po file there are four entries:
		 </para>
		<itemizedlist>
		<listitem><para>Those which begin with "#:" showing the places in the source code that
               			contains the string being translated (there may be one or
				more)</para></listitem>
		<listitem><para>Those which begin with "#," containing some flags (not always
                		present)</para></listitem>
		<listitem><para>Those which begin with "msgid" containing the English string
                		being translated (it may be spanned in several
				lines)</para></listitem>
		<listitem><para>Those which begin with "msgstrg" containing the translated
                		string</para></listitem>
		</itemizedlist>
                <warning>
		<para>When an entry is tagged as fuzzy that means it is probably
		      incorrect. You have to make sure the translation is correct
		      and then delete the #, fuzzy line. Remember that as long as a
		      translation is marked "fuzzy", it will NOT actually be
		      used!
	        </para>
		</warning>
		<para>So if you are a translator you have to:</para>

	
                 <itemizedlist>    
                 
		 <listitem><para>translate all empty msfstrg entries</para></listitem>
                                 		
                 <listitem><para>
		 	 	 check all fuzzy entries, correct them if they are wrong and remove
		 		 all fuzzy tags
		 </para></listitem>
                                             		
                 </itemizedlist>
                 </sect2>
		 <sect2>
		 	<title>Shortcut keys</title>

		<para>Shortcut keys known as hotkeys or even accelerator keys are
		defined as follows (look at the underscore, please):</para>
                
		<screen>
		# src/toolbars.c:482
		#: ../src/filebrowser.c:1453
		msgid "/_Refresh"
		msgstr "/_Actualizar"
		</screen>	

		<para>That it means that in the English locale the user have to
		press <keycap>Alt+r</keycap> to activate this particular GUI element. On the
		other hand if your locale es Spanish your shortcut key will be
		<keycap>Alt+a</keycap>.
		</para>
		<warning>
		You have to keep in mind that two GUI elements must not
		have the same shortcut key at the same level. 
		</warning>
		</sect2>
		
		 <sect2>
		 <title>How to contribute</title>
        
		 <para>
		 It is really easy. Just drop me a line at
		 wecharri@arnet.com.ar and I will send you your po file ready
		 to be translated. When you finish, just send it me back (use
		 <application>gzip</application> or <application>bzip2</application> if possible,
		 please). Then I will check it and if everything is right I will add it into
		 <application>CVS</application>.
		 </para>

		 <para>
		 About ten days before a new release I will send a new
		 fresh po copy to each translator to repeat this process.
		 </para>

		 <para>All po files will be named as follows:</para>

		           <screen>date-foo.po.gz (date: day-month-year)</screen>

			   <para>Example:</para>
			   <screen>12-12-2004.es.po.gz (for Spanish po file)</screen>


		 <para>Please, remember: </para>
		 <orderedlist>
		 <listitem><para>Do not rename it (I need it for tracking stuff)</para></listitem>
		 <listitem><para>Send it me back as soon as possible in zipped format too.</para></listitem>
		 <listitem><para>Do not mix it without any local copy you have.</para></listitem>
		 <listitem><para>Remember they are in UTF-8 format</para></listitem>
                 <listitem><para>Subject in my mail will be ***New Bluefish PO
		 File !***</para></listitem>
                 </orderedlist>
                 <para>
		 And at last, do not start a new translation before contact me
		 or contact Olivier and do not post your po file at the list,
		 please..
 		  </para>
		 <para>
		 If you have some doubts, do not hesitate contact me at
		 wecharri@arnet.com.ar
		 </para>
		 </sect2>
		

                    
	</sect1>
	<sect1 id="developing-bluefish-tips">
		<title>Some tips</title>
		<para>
			Development tips
		</para>
	</sect1>
	<sect1 id="developing-bluefish-making-releases">
		<title>Making releases</title>
		<para>
			What is to do
		</para>
	</sect1>
	<sect1 id="developing-bluefish-useful-stuff">
		<title>Useful stuff</title>
		<para>
			Links and so
		</para>
	</sect1>

</chapter>

